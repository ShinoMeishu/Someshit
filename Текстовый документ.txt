Модуль 1

apt-get update
apt-get upgrade

1. Выполните базовую настройку всех устройств:
a. Присвоить имена в соответствии с топологией
b. Рассчитайте IP-адресацию IPv4 и IPv6.
Необходимо заполнить таблицу №1, чтобы
эксперты могли проверить ваше рабочее место.
c. Пул адресов для сети офиса BRANCH - не более 16
d. Пул адресов для сети офиса HQ - не более 64

A. Hostnamectl set-hostname *hostname*
B. Рандом адресация
C, D. Количество хостов = 2^(32-маска)-2 
<16 = 2^(32-28)-2 = 14 (28 маска)
<64= 2^(32-26)-2 = 62 (26 маска)

2. Настройте внутреннюю динамическую маршрутизацию по
средствам FRR. Выберите и обоснуйте выбор протокола
динамической маршрутизации из расчёта, что в
дальнейшем сеть будет масштабироваться.
a. Составьте топологию сети L3.

3. Настройте автоматическое распределение IP-адресов на
роутере HQ-R.
a. Учтите, что у сервера должен быть зарезервирован
адрес.
apt-get install isc-dhcp-server
dpkg-reconfigure isc-dhcp-server
option domain-name "hq.work";
option domain-name-servers *HQ-Serv Address*
subnet *Сеть HQ*.0 netmask 255.255.255.240
{
range *.10 *.50;
option routers *.1;
}
host *Имя хоста локальное* {
hardware ethernet *Макадрес интерфейса*;
fixed-address *.5;
}

4. Настройте локальные учётные записи на всех устройствах
в соответствии с таблицей 2.
useradd test
passwd test

5. Измерьте пропускную способность сети между двумя
узлами HQ-R-ISP по средствам утилиты iperf 3.
Предоставьте описание пропускной способности канала со
скриншотами.
install iperf
iperf -s -D
iperf -c <host>

6. Составьте backup скрипты для сохранения конфигурации
сетевых устройств, а именно HQ-R BR-R.
Продемонстрируйте их работу.

which BackupRouterSettings.
vtysh –c ‘write'
cp /etc/frr/frr.conf /etc/frr/frr_backup.conf

7. Настройте подключение по SSH для удалённого
конфигурирования устройства HQ-SRV по порту 2222.
Учтите, что вам необходимо перенаправить трафик на этот
порт по средствам контролирования трафика.
apt-get install openssh-server
sudo ufw allow ssh
systemctl status ssh
sudo nano /etc/ssh/sshd_config
ssh user@host -p 2222

iptables -t nat -A PREROUTING -i eth0-p tcp --dport 22  -j REDIRECT --to-ports 2222

8. Настройте контроль доступа до HQ-SRV по SSH со всех
устройств, кроме CLI.
iptables -A INPUT -s [IP] -j DROP 
Модуль 2

1. Настройте DNS-сервер на сервере HQ-SRV:
a. На DNS сервере необходимо настроить 2 зоны
https://bigro.ru/system/99-dns-cerver-nastrojka
apt-get install bind9
nano /etc/bind/named.conf.options

acl mynetwork { *.0/24 ; 127.0.0.1; }; 
options {      
directory "/var/cache/bind";     
forwarders {
8.8.8.8; 
};
listen-on {          
192.168.91.10; 
192.168.91.20;
}; 
dnssec-validation auto;
auth-nxdomain no;
listen-on-v6 { none; };
allow-query { any; };

2. Настройте синхронизацию времени между сетевыми
устройствами по протоколу NTP.
a. В качестве сервера должен выступать роутер HQ-R
со стратумом 5
b. Используйте Loopback интерфейс на HQ-R, как
источник сервера времени
c. Все остальные устройства и сервера должны
синхронизировать свое время с роутером HQ-R
d. Все устройства и сервера настроены на московский
часовой пояс (UTC +3)

3. Настройте сервер домена выбор, его типа обоснуйте, на
базе HQ-SRV через web интерфейс, выбор технологий
обоснуйте.
a. Введите машины BR-SRV и CLI в данный домен
b. Организуйте отслеживание подключения к домену

4. Реализуйте файловый SMB или NFS (выбор обоснуйте)
сервер на базе сервера HQ-SRV.
a. Должны быть опубликованы общие папки по
названиям:
i. Branch_Files - только для пользователя
Branch admin;
ii. Network - только для пользователя Network
admin;
iii. Admin_Files - только для пользователя
Admin;
b. Каждая папка должна монтироваться на всех
серверах в папку /mnt/<name_folder> (например,
/mnt/All_files) автоматически при входе доменного
пользователя в систему и отключаться при его
выходе из сессии. Монтироваться должны только
доступные пользователю каталоги.

5. Сконфигурируйте веб-сервер LMS Apache на сервере BRSRV:
a. На главной странице должен отражаться номер
места
b. Используйте базу данных mySQL
c. Создайте пользователей в соответствии с таблицей,
пароли у всех пользователей «P@ssw0rd»

6. Запустите сервис MediaWiki используя docker на сервере
HQ-SRV.
a. Установите Docker и Docker Compose.
b. Создайте в домашней директории пользователя
файл wiki.yml для приложения MediaWiki:
i. Средствами docker compose должен
создаваться стек контейнеров с
приложением MediaWiki и базой данных
ii. Используйте два сервиса;
iii. Основной контейнер MediaWiki должен
называться wiki и использовать образ
mediawiki;
iv. Файл LocalSettings.php с корректными
настройками должен находиться в
домашней папке пользователя и
автоматически монтироваться в образ;
v. Контейнер с базой данных должен
называться db и использовать образ mysql;
vi. Он должен создавать базу с названием
mediawiki, доступную по стандартному
порту, для пользователя wiki с паролем
DEP@ssw0rd;
vii. База должна храниться в отдельном volume с
названием dbvolume.
MediaWiki должна быть доступна извне через порт 8080.


 
Модуль 3

1. Реализуйте мониторинг по средствам rsyslog на всех Linux
хостах.
a. Составьте отчёт о том, как работает мониторинг

2. Выполните настройку центра сертификации на базе HQSRV:
a. Выдайте сертификаты для SSH;
b. Выдайте сертификаты для веб серверов;
3. Настройте SSH на всех Linux хостах:
a. Banner ( Authorized access only! );
b. Установите запрет на доступ root;
c. Отключите аутентификацию по паролю;
d. Переведите на нестандартный порт;
e. Ограничьте ввод попыток до 4;
f. Отключите пустые пароли;
g. Установите предел времени аутентификации до 5
минут;
h. Установите авторизацию по сертификату выданным
HQ-SRV

5. Настройте систему управления трафиком на роутере BR-R
для контроля входящего трафика в соответствии со
следующими правилами:
a. Разрешите подключения к портам DNS (порт 53),
HTTP (порт 80) и HTTPS (порт 443) для всех клиентов.
Эти порты необходимы для работы настраиваемых
служб.
b. Разрешите работу выбранного протокола организации
защищенной связи. Разрешение портов должно быть
выполнено по принципу "необходимо и достаточно".
c. Разрешите работу протоколов ICMP (протокол
управления сообщениями Internet).
d. Разрешите работу протокола SSH (Secure Shell) (SSH
используется для безопасного удаленного доступа и
управления устройствами).
e. Запретите все прочие подключения.
f. Все другие подключения должны быть запрещены для
обеспечения безопасности сети.

6. Настройте виртуальный принтер с помощью CUPS для
возможности печати документов из Linux-системы на
сервере BR-SRV.

7. Между офисами HQ и BRANCH установите защищенный
туннель, позволяющий осуществлять связь между
регионами с применением внутренних адресов.
8. По средствам уже настроенного мониторинга установите
следующие параметры:
a. Warning
i. Нагрузка процессора больше или равна 70%
ii. Заполненность оперативной памяти больше или
равна 80%
iii. Заполненность диска больше или равна 85%
b. Напишите план действия при получении Warning
сообщений

9. Настройте программный RAID 5 из дисков по 1 Гб,
которые подключены к машине BR-SRV.

10. Настройте Bacula на сервере HQ-SRV для резервного
копирования etc на сервере BR-SRV.
